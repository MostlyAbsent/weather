// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model Forecast {
    id     Int      @id @default(autoincrement())
    expiry DateTime
    Region Region[]
}

model Region {
    id         Int             @id @default(autoincrement())
    aac        String          @unique
    districs   PublicDistric[]
    forecast   Forecast        @relation(fields: [forecastID], references: [id])
    forecastID Int
}

model PublicDistric {
    id        Int        @id @default(autoincrement())
    aac       String     @unique
    locations Location[]
    region    Region     @relation(fields: [regionKey], references: [aac])
    regionKey String
}

model Location {
    id             Int              @id @default(autoincrement())
    aac            String           @unique
    description    String
    forcastPeriods ForecastPeriod[]
    PublicDistric  PublicDistric?   @relation(fields: [distric], references: [aac])
    distric        String
}

model ForecastPeriod {
    id                        Int      @id @default(autoincrement())
    index                     Int
    startTime                 DateTime
    endTime                   DateTime
    startTimeAWST             DateTime
    endTimeAWST               DateTime
    forecastIconCode          Int
    tempMax                   Int
    tempMin                   Int?
    precis                    String
    precipitiationProbability Int
    precipitiationRange       String?
    location                  Location @relation(fields: [area], references: [aac])
    area                      String
}
